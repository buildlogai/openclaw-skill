{"version":3,"sources":["../src/schema.ts","../src/constants.ts","../src/utils.ts"],"names":["z"],"mappings":";;;;;AAMO,IAAM,uBAAuBA,KAAA,CAAE,IAAA,CAAK,CAAC,MAAA,EAAQ,MAAM,CAAC;AAEpD,IAAM,gBAAA,GAAmBA,MAAE,IAAA,CAAK;AAAA,EACrC,QAAA;AAAA,EAAU,QAAA;AAAA,EAAU,UAAA;AAAA,EAAY,KAAA;AAAA,EAAO,QAAA;AAAA,EAAU,WAAA;AAAA,EAAa,UAAA;AAAA,EAAY;AAC5E,CAAC;AAEM,IAAM,gBAAA,GAAmBA,MAAE,IAAA,CAAK;AAAA,EACrC,QAAA;AAAA,EAAU,KAAA;AAAA,EAAO,SAAA;AAAA,EAAW,QAAA;AAAA,EAAU;AACxC,CAAC;AAEM,IAAM,kBAAA,GAAqBA,MAAE,IAAA,CAAK;AAAA,EACvC,aAAA;AAAA,EAAe,KAAA;AAAA,EAAO,SAAA;AAAA,EAAW,UAAA;AAAA,EAAY;AAC/C,CAAC;AAEM,IAAM,qBAAA,GAAwBA,MAAE,IAAA,CAAK;AAAA,EAC1C,SAAA;AAAA,EAAW,SAAA;AAAA,EAAW;AACxB,CAAC;AAEM,IAAM,mBAAA,GAAsBA,MAAE,IAAA,CAAK;AAAA,EACxC,SAAA;AAAA,EAAW,SAAA;AAAA,EAAW,SAAA;AAAA,EAAW;AACnC,CAAC;AAMM,IAAM,oBAAA,GAAuBA,MAAE,MAAA,CAAO;AAAA,EAC3C,IAAA,EAAMA,KAAA,CAAE,MAAA,EAAO,CAAE,QAAA,EAAS;AAAA,EAC1B,QAAA,EAAUA,KAAA,CAAE,MAAA,EAAO,CAAE,QAAA,EAAS;AAAA,EAC9B,KAAKA,KAAA,CAAE,MAAA,EAAO,CAAE,GAAA,GAAM,QAAA;AACxB,CAAC;AAMD,IAAM,cAAA,GAAiBA,MAAE,MAAA,CAAO;AAAA,EAC9B,EAAA,EAAIA,KAAA,CAAE,MAAA,EAAO,CAAE,IAAA,EAAK;AAAA,EACpB,SAAA,EAAWA,KAAA,CAAE,MAAA,EAAO,CAAE,WAAA,EAAY;AAAA,EAClC,UAAUA,KAAA,CAAE,MAAA,EAAO,CAAE,GAAA,GAAM,WAAA;AAC7B,CAAC,CAAA;AAEM,IAAM,gBAAA,GAAmB,eAAe,MAAA,CAAO;AAAA,EACpD,IAAA,EAAMA,KAAA,CAAE,OAAA,CAAQ,QAAQ,CAAA;AAAA,EACxB,OAAA,EAASA,KAAA,CAAE,MAAA,EAAO,CAAE,IAAI,CAAC,CAAA;AAAA,EACzB,SAASA,KAAA,CAAE,KAAA,CAAMA,MAAE,MAAA,EAAQ,EAAE,QAAA,EAAS;AAAA,EACtC,MAAA,EAAQA,KAAA,CAAE,MAAA,EAAO,CAAE,QAAA;AACrB,CAAC;AAEM,IAAM,gBAAA,GAAmB,eAAe,MAAA,CAAO;AAAA,EACpD,IAAA,EAAMA,KAAA,CAAE,OAAA,CAAQ,QAAQ,CAAA;AAAA,EACxB,OAAA,EAASA,KAAA,CAAE,MAAA,EAAO,CAAE,IAAI,CAAC,CAAA;AAAA,EACzB,cAAcA,KAAA,CAAE,KAAA,CAAMA,MAAE,MAAA,EAAQ,EAAE,QAAA,EAAS;AAAA,EAC3C,eAAeA,KAAA,CAAE,KAAA,CAAMA,MAAE,MAAA,EAAQ,EAAE,QAAA,EAAS;AAAA,EAC5C,cAAcA,KAAA,CAAE,KAAA,CAAMA,MAAE,MAAA,EAAQ,EAAE,QAAA,EAAS;AAAA,EAC3C,eAAeA,KAAA,CAAE,KAAA,CAAMA,MAAE,MAAA,EAAQ,EAAE,QAAA,EAAS;AAAA,EAC5C,iBAAiBA,KAAA,CAAE,KAAA,CAAMA,MAAE,MAAA,EAAQ,EAAE,QAAA,EAAS;AAAA,EAC9C,QAAA,EAAUA,KAAA,CAAE,MAAA,EAAO,CAAE,QAAA,EAAS;AAAA,EAC9B,UAAA,EAAYA,KAAA,CAAE,MAAA,EAAO,CAAE,QAAA,EAAS;AAAA,EAChC,OAAOA,KAAA,CAAE,MAAA,CAAOA,MAAE,MAAA,EAAQ,EAAE,QAAA;AAC9B,CAAC;AAEM,IAAM,kBAAA,GAAqB,eAAe,MAAA,CAAO;AAAA,EACtD,IAAA,EAAMA,KAAA,CAAE,OAAA,CAAQ,UAAU,CAAA;AAAA,EAC1B,OAAA,EAASA,KAAA,CAAE,MAAA,EAAO,CAAE,IAAI,CAAC,CAAA;AAAA,EACzB,OAAA,EAAS,qBAAA;AAAA,EACT,OAAA,EAASA,KAAA,CAAE,MAAA,EAAO,CAAE,QAAA,EAAS;AAAA,EAC7B,MAAA,EAAQA,KAAA,CAAE,MAAA,EAAO,CAAE,QAAA,EAAS;AAAA,EAC5B,UAAUA,KAAA,CAAE,MAAA,EAAO,CAAE,GAAA,GAAM,QAAA;AAC7B,CAAC;AAEM,IAAM,cAAA,GAAiB,eAAe,MAAA,CAAO;AAAA,EAClD,IAAA,EAAMA,KAAA,CAAE,OAAA,CAAQ,MAAM,CAAA;AAAA,EACtB,OAAA,EAASA,KAAA,CAAE,MAAA,EAAO,CAAE,IAAI,CAAC,CAAA;AAAA,EACzB,QAAA,EAAU,mBAAmB,QAAA;AAC/B,CAAC;AAEM,IAAM,oBAAA,GAAuB,eAAe,MAAA,CAAO;AAAA,EACxD,IAAA,EAAMA,KAAA,CAAE,OAAA,CAAQ,YAAY,CAAA;AAAA,EAC5B,IAAA,EAAMA,KAAA,CAAE,MAAA,EAAO,CAAE,IAAI,CAAC,CAAA;AAAA,EACtB,OAAA,EAASA,KAAA,CAAE,MAAA,EAAO,CAAE,IAAI,CAAC;AAC3B,CAAC;AAEM,IAAM,eAAA,GAAkB,eAAe,MAAA,CAAO;AAAA,EACnD,IAAA,EAAMA,KAAA,CAAE,OAAA,CAAQ,OAAO,CAAA;AAAA,EACvB,OAAA,EAASA,KAAA,CAAE,MAAA,EAAO,CAAE,IAAI,CAAC,CAAA;AAAA,EACzB,UAAA,EAAYA,KAAA,CAAE,MAAA,EAAO,CAAE,QAAA,EAAS;AAAA,EAChC,QAAA,EAAUA,MAAE,OAAA;AACd,CAAC;AAEM,IAAM,kBAAA,GAAqBA,KAAA,CAAE,kBAAA,CAAmB,MAAA,EAAQ;AAAA,EAC7D,gBAAA;AAAA,EACA,gBAAA;AAAA,EACA,kBAAA;AAAA,EACA,cAAA;AAAA,EACA,oBAAA;AAAA,EACA;AACF,CAAC;AAMM,IAAM,sBAAA,GAAyBA,MAAE,MAAA,CAAO;AAAA,EAC7C,EAAA,EAAIA,KAAA,CAAE,MAAA,EAAO,CAAE,IAAA,EAAK;AAAA,EACpB,KAAA,EAAOA,MAAE,MAAA,EAAO,CAAE,IAAI,CAAC,CAAA,CAAE,IAAI,GAAG,CAAA;AAAA,EAChC,aAAaA,KAAA,CAAE,MAAA,GAAS,GAAA,CAAI,GAAI,EAAE,QAAA,EAAS;AAAA,EAC3C,MAAA,EAAQ,qBAAqB,QAAA,EAAS;AAAA,EACtC,SAAA,EAAWA,KAAA,CAAE,MAAA,EAAO,CAAE,QAAA,EAAS;AAAA,EAC/B,iBAAiBA,KAAA,CAAE,MAAA,EAAO,CAAE,GAAA,GAAM,WAAA,EAAY;AAAA,EAC9C,MAAA,EAAQ,gBAAA;AAAA,EACR,UAAA,EAAY,gBAAA;AAAA,EACZ,KAAA,EAAOA,KAAA,CAAE,MAAA,EAAO,CAAE,QAAA,EAAS;AAAA,EAC3B,QAAA,EAAUA,KAAA,CAAE,MAAA,EAAO,CAAE,QAAA,EAAS;AAAA,EAC9B,SAAA,EAAWA,KAAA,CAAE,MAAA,EAAO,CAAE,QAAA,EAAS;AAAA,EAC/B,IAAA,EAAMA,KAAA,CAAE,KAAA,CAAMA,KAAA,CAAE,MAAA,EAAO,CAAE,GAAA,CAAI,EAAE,CAAC,CAAA,CAAE,GAAA,CAAI,EAAE,EAAE,QAAA,EAAS;AAAA,EACnD,UAAA,EAAYA,MAAE,OAAA,EAAQ;AAAA,EACtB,cAAcA,KAAA,CAAE,KAAA,CAAMA,MAAE,MAAA,EAAQ,EAAE,QAAA;AACpC,CAAC;AAMM,IAAM,qBAAA,GAAwBA,MAAE,MAAA,CAAO;AAAA,EAC5C,MAAA,EAAQ,mBAAA;AAAA,EACR,OAAA,EAASA,KAAA,CAAE,MAAA,EAAO,CAAE,IAAI,CAAC,CAAA;AAAA,EACzB,cAAcA,KAAA,CAAE,MAAA,EAAO,CAAE,GAAA,GAAM,WAAA,EAAY;AAAA,EAC3C,eAAeA,KAAA,CAAE,MAAA,EAAO,CAAE,GAAA,GAAM,WAAA,EAAY;AAAA,EAC5C,YAAA,EAAcA,MAAE,OAAA,EAAQ;AAAA,EACxB,gBAAA,EAAkBA,KAAA,CAAE,MAAA,EAAO,CAAE,QAAA;AAC/B,CAAC;AAMM,IAAM,kBAAA,GAAqBA,MAAE,MAAA,CAAO;AAAA,EACzC,OAAA,EAASA,KAAA,CAAE,OAAA,CAAQ,OAAO,CAAA;AAAA,EAC1B,MAAA,EAAQ,oBAAA;AAAA,EACR,QAAA,EAAU,sBAAA;AAAA,EACV,KAAA,EAAOA,KAAA,CAAE,KAAA,CAAM,kBAAkB,CAAA;AAAA,EACjC,OAAA,EAAS;AACX,CAAC;AAWM,IAAM,mBAAA,GAAsB;;;AC/J5B,IAAM,gBAAA,GAAmB;AAGzB,IAAM,uBAAA,GAA0B;AAGhC,IAAM,kBAAA,GAAqB;AAG3B,IAAM,mBAAA,GAAsB,CAAC,WAAA,EAAa,OAAO;AAGjD,IAAM,0BAAA,GAA6B;AAGnC,IAAM,+BAA+B,GAAA,GAAM;AAG3C,IAAM,4BAAA,GAA+B,KAAK,IAAA,GAAO;AAGjD,IAAM,kBAAA,GAAqB;AAG3B,IAAM,yBAAA,GAA4B;AAGlC,IAAM,+BAAA,GAAkC;AAGxC,IAAM,iBAAA,GAAoB;AAG1B,IAAM,uBAAA,GAA0B;AAGhC,IAAM,wBAAA,GAA2B;AAAA,EACtC,oBAAA;AAAA,EACA,YAAA;AAAA,EACA,YAAA;AAAA,EACA,aAAA;AAAA,EACA,aAAA;AAAA,EACA,aAAA;AAAA,EACA,gBAAA;AAAA,EACA,WAAA;AAAA,EACA,sBAAA;AAAA,EACA,mBAAA;AAAA,EACA,cAAA;AAAA,EACA,UAAA;AAAA,EACA,UAAA;AAAA,EACA,UAAA;AAAA,EACA,cAAA;AAAA,EACA;AACF;;;ACnCO,SAAS,eAAe,QAAA,EAA2B;AACxD,EAAA,MAAM,KAAA,GAAQ,SAAS,WAAA,EAAY;AACnC,EAAA,OAAO,oBAAoB,IAAA,CAAK,CAAA,GAAA,KAAO,KAAA,CAAM,QAAA,CAAS,GAAG,CAAC,CAAA;AAC5D;AAKO,SAAS,oBAAA,GAA+B;AAC7C,EAAA,OAAO,WAAA;AACT;AAKO,SAAS,mBAAA,GAA8B;AAC5C,EAAA,OAAO,kBAAA;AACT;AAKO,SAAS,iBAAiB,IAAA,EAAiC;AAChE,EAAA,MAAM,MAAA,GAAS,kBAAA,CAAmB,SAAA,CAAU,IAAI,CAAA;AAEhD,EAAA,IAAI,OAAO,OAAA,EAAS;AAClB,IAAA,MAAM,WAAW,MAAA,CAAO,IAAA;AACxB,IAAA,MAAM,WAAgC,EAAC;AAGvC,IAAA,MAAM,QAAA,GAAW,IAAA,CAAK,SAAA,CAAU,IAAI,CAAA,CAAE,MAAA;AACtC,IAAA,IAAI,QAAA,CAAS,MAAA,KAAW,MAAA,IAAU,QAAA,GAAW,4BAAA,EAA8B;AACzE,MAAA,QAAA,CAAS,IAAA,CAAK;AAAA,QACZ,IAAA,EAAM,QAAA;AAAA,QACN,OAAA,EAAS,oBAAoB,WAAA,CAAY,QAAQ,CAAC,CAAA,gCAAA,EAAmC,WAAA,CAAY,4BAA4B,CAAC,CAAA,MAAA,CAAA;AAAA,QAC9H,UAAA,EAAY;AAAA,OACb,CAAA;AAAA,IACH;AAGA,IAAA,IAAI,QAAA,CAAS,MAAA,KAAW,MAAA,IAAU,QAAA,GAAW,4BAAA,EAA8B;AACzE,MAAA,QAAA,CAAS,IAAA,CAAK;AAAA,QACZ,IAAA,EAAM,QAAA;AAAA,QACN,OAAA,EAAS,oBAAoB,WAAA,CAAY,QAAQ,CAAC,CAAA,gCAAA,EAAmC,WAAA,CAAY,4BAA4B,CAAC,CAAA,MAAA,CAAA;AAAA,QAC9H,UAAA,EAAY;AAAA,OACb,CAAA;AAAA,IACH;AAEA,IAAA,OAAO,EAAE,OAAO,IAAA,EAAM,QAAA,EAAU,SAAS,MAAA,GAAS,CAAA,GAAI,WAAW,MAAA,EAAU;AAAA,EAC7E;AAEA,EAAA,OAAO;AAAA,IACL,KAAA,EAAO,KAAA;AAAA,IACP,MAAA,EAAQ,MAAA,CAAO,KAAA,CAAM,MAAA,CAAO,IAAI,CAAA,KAAA,MAAU;AAAA,MACxC,IAAA,EAAM,KAAA,CAAM,IAAA,CAAK,IAAA,CAAK,GAAG,CAAA;AAAA,MACzB,SAAS,KAAA,CAAM,OAAA;AAAA,MACf,MAAM,KAAA,CAAM;AAAA,KACd,CAAE;AAAA,GACJ;AACF;AAKO,SAAS,cAAc,IAAA,EAA4B;AACxD,EAAA,MAAM,IAAA,GAAO,IAAA,CAAK,KAAA,CAAM,IAAI,CAAA;AAC5B,EAAA,MAAM,MAAA,GAAS,kBAAA,CAAmB,KAAA,CAAM,IAAI,CAAA;AAC5C,EAAA,OAAO,MAAA;AACT;AAKO,SAAS,kBAAkB,IAAA,EAAmC;AACnE,EAAA,IAAI;AACF,IAAA,OAAO,cAAc,IAAI,CAAA;AAAA,EAC3B,CAAA,CAAA,MAAQ;AACN,IAAA,OAAO,IAAA;AAAA,EACT;AACF;AAKO,SAAS,aAAa,QAAA,EAAuC;AAClE,EAAA,MAAM,KAAA,GAAuB;AAAA,IAC3B,QAAQ,QAAA,CAAS,MAAA;AAAA,IACjB,eAAA,EAAiB,SAAS,QAAA,CAAS,eAAA;AAAA,IACnC,SAAA,EAAW,SAAS,KAAA,CAAM,MAAA;AAAA,IAC1B,WAAA,EAAa,CAAA;AAAA,IACb,WAAA,EAAa,CAAA;AAAA,IACb,aAAA,EAAe,CAAA;AAAA,IACf,SAAA,EAAW,CAAA;AAAA,IACX,YAAA,EAAc,SAAS,OAAA,CAAQ,YAAA;AAAA,IAC/B,aAAA,EAAe,SAAS,OAAA,CAAQ,aAAA;AAAA,IAChC,YAAA,EAAc,SAAS,OAAA,CAAQ;AAAA,GACjC;AAEA,EAAA,KAAA,MAAW,IAAA,IAAQ,SAAS,KAAA,EAAO;AACjC,IAAA,QAAQ,KAAK,IAAA;AAAM,MACjB,KAAK,QAAA;AACH,QAAA,KAAA,CAAM,WAAA,EAAA;AACN,QAAA;AAAA,MACF,KAAK,QAAA;AACH,QAAA,KAAA,CAAM,WAAA,EAAA;AACN,QAAA;AAAA,MACF,KAAK,UAAA;AACH,QAAA,KAAA,CAAM,aAAA,EAAA;AACN,QAAA;AAAA,MACF,KAAK,MAAA;AACH,QAAA,KAAA,CAAM,SAAA,EAAA;AACN,QAAA;AAAA;AACJ,EACF;AAEA,EAAA,OAAO,KAAA;AACT;AAKO,SAAS,qBAAqB,QAAA,EAA8C;AACjF,EAAA,MAAM,QAAA,GAAW,IAAA,CAAK,SAAA,CAAU,QAAQ,CAAA,CAAE,MAAA;AAE1C,EAAA,IAAI,QAAA,GAAW,EAAA,GAAK,IAAA,EAAM,OAAO,MAAA;AACjC,EAAA,IAAI,QAAA,GAAW,EAAA,GAAK,IAAA,EAAM,OAAO,OAAA;AACjC,EAAA,IAAI,QAAA,GAAW,GAAA,GAAM,IAAA,EAAM,OAAO,QAAA;AAClC,EAAA,OAAO,OAAA;AACT;AAKO,SAAS,aAAa,QAAA,EAAiC;AAE5D,EAAA,MAAM,aAAa,QAAA,CAAS,KAAA,CAAM,KAAK,CAAA,CAAA,KAAK,CAAA,CAAE,SAAS,QAAQ,CAAA;AAC/D,EAAA,IAAI,CAAC,YAAY,OAAO,KAAA;AAGxB,EAAA,IAAI,CAAC,QAAA,CAAS,OAAA,EAAS,OAAO,KAAA;AAG9B,EAAA,OAAO,QAAA,CAAS,OAAA,CAAQ,YAAA,IAAgB,QAAA,CAAS,QAAA,CAAS,UAAA;AAC5D;AAKO,SAAS,OAAO,QAAA,EAAsC;AAC3D,EAAA,IAAI,QAAA,CAAS,WAAW,MAAA,EAAQ;AAC9B,IAAA,OAAO,QAAA;AAAA,EACT;AAEA,EAAA,OAAO;AAAA,IACL,GAAG,QAAA;AAAA,IACH,MAAA,EAAQ,MAAA;AAAA,IACR,KAAA,EAAO,QAAA,CAAS,KAAA,CAAM,GAAA,CAAI,CAAA,IAAA,KAAQ;AAChC,MAAA,IAAI,IAAA,CAAK,SAAS,QAAA,EAAU;AAE1B,QAAA,MAAM,EAAE,UAAA,EAAY,KAAA,EAAO,GAAG,YAAW,GAAI,IAAA;AAC7C,QAAA,OAAO,UAAA;AAAA,MACT;AACA,MAAA,IAAI,IAAA,CAAK,SAAS,UAAA,EAAY;AAE5B,QAAA,MAAM,EAAE,MAAA,EAAQ,QAAA,EAAU,GAAG,cAAa,GAAI,IAAA;AAC9C,QAAA,OAAO,YAAA;AAAA,MACT;AACA,MAAA,OAAO,IAAA;AAAA,IACT,CAAC;AAAA,GACH;AACF;AAKO,SAAS,eAAe,OAAA,EAAyB;AACtD,EAAA,MAAM,KAAA,GAAQ,IAAA,CAAK,KAAA,CAAM,OAAA,GAAU,IAAI,CAAA;AACvC,EAAA,MAAM,OAAA,GAAU,IAAA,CAAK,KAAA,CAAO,OAAA,GAAU,OAAQ,EAAE,CAAA;AAChD,EAAA,MAAM,IAAA,GAAO,IAAA,CAAK,KAAA,CAAM,OAAA,GAAU,EAAE,CAAA;AAEpC,EAAA,IAAI,QAAQ,CAAA,EAAG;AACb,IAAA,OAAO,CAAA,EAAG,KAAK,CAAA,EAAA,EAAK,OAAO,CAAA,CAAA,CAAA;AAAA,EAC7B;AACA,EAAA,IAAI,UAAU,CAAA,EAAG;AACf,IAAA,OAAO,CAAA,EAAG,OAAO,CAAA,EAAA,EAAK,IAAI,CAAA,CAAA,CAAA;AAAA,EAC5B;AACA,EAAA,OAAO,GAAG,IAAI,CAAA,CAAA,CAAA;AAChB;AAKO,SAAS,oBAAoB,OAAA,EAAyB;AAC3D,EAAA,MAAM,KAAA,GAAQ,IAAA,CAAK,KAAA,CAAM,OAAA,GAAU,IAAI,CAAA;AACvC,EAAA,MAAM,OAAA,GAAU,IAAA,CAAK,KAAA,CAAO,OAAA,GAAU,OAAQ,EAAE,CAAA;AAChD,EAAA,MAAM,IAAA,GAAO,IAAA,CAAK,KAAA,CAAM,OAAA,GAAU,EAAE,CAAA;AAEpC,EAAA,IAAI,QAAQ,CAAA,EAAG;AACb,IAAA,OAAO,GAAG,KAAK,CAAA,CAAA,EAAI,OAAA,CAAQ,QAAA,GAAW,QAAA,CAAS,CAAA,EAAG,GAAG,CAAC,IAAI,IAAA,CAAK,QAAA,GAAW,QAAA,CAAS,CAAA,EAAG,GAAG,CAAC,CAAA,CAAA;AAAA,EAC5F;AACA,EAAA,OAAO,CAAA,EAAG,OAAO,CAAA,CAAA,EAAI,IAAA,CAAK,UAAS,CAAE,QAAA,CAAS,CAAA,EAAG,GAAG,CAAC,CAAA,CAAA;AACvD;AAKO,SAAS,YAAY,KAAA,EAAuB;AACjD,EAAA,IAAI,KAAA,GAAQ,IAAA,EAAM,OAAO,CAAA,EAAG,KAAK,CAAA,EAAA,CAAA;AACjC,EAAA,IAAI,KAAA,GAAQ,OAAO,IAAA,EAAM,OAAO,IAAI,KAAA,GAAQ,IAAA,EAAM,OAAA,CAAQ,CAAC,CAAC,CAAA,GAAA,CAAA;AAC5D,EAAA,OAAO,IAAI,KAAA,IAAS,IAAA,GAAO,IAAA,CAAA,EAAO,OAAA,CAAQ,CAAC,CAAC,CAAA,GAAA,CAAA;AAC9C;AAKO,SAAS,YAAY,IAAA,EAA4B;AACtD,EAAA,MAAM,KAAA,GAA8C;AAAA,IAClD,MAAA,EAAQ,WAAA;AAAA,IACR,MAAA,EAAQ,QAAA;AAAA,IACR,QAAA,EAAU,iBAAA;AAAA,IACV,IAAA,EAAM,WAAA;AAAA,IACN,UAAA,EAAY,WAAA;AAAA,IACZ,KAAA,EAAO;AAAA,GACT;AACA,EAAA,OAAO,KAAA,CAAM,KAAK,IAAI,CAAA;AACxB;AAKO,SAAS,aAAa,IAAA,EAA4B;AACvD,EAAA,MAAM,MAAA,GAA+C;AAAA,IACnD,MAAA,EAAQ,QAAA;AAAA,IACR,MAAA,EAAQ,QAAA;AAAA,IACR,QAAA,EAAU,UAAA;AAAA,IACV,IAAA,EAAM,MAAA;AAAA,IACN,UAAA,EAAY,YAAA;AAAA,IACZ,KAAA,EAAO;AAAA,GACT;AACA,EAAA,OAAO,MAAA,CAAO,KAAK,IAAI,CAAA;AACzB;AAKO,SAAS,eAAe,QAAA,EAA0B;AACvD,EAAA,MAAM,MAAM,QAAA,CAAS,KAAA,CAAM,GAAG,CAAA,CAAE,GAAA,IAAO,WAAA,EAAY;AAEnD,EAAA,MAAM,WAAA,GAAsC;AAAA,IAC1C,EAAA,EAAI,YAAA;AAAA,IACJ,GAAA,EAAK,YAAA;AAAA,IACL,EAAA,EAAI,YAAA;AAAA,IACJ,GAAA,EAAK,YAAA;AAAA,IACL,GAAA,EAAK,YAAA;AAAA,IACL,GAAA,EAAK,YAAA;AAAA,IACL,EAAA,EAAI,QAAA;AAAA,IACJ,EAAA,EAAI,MAAA;AAAA,IACJ,EAAA,EAAI,IAAA;AAAA,IACJ,EAAA,EAAI,MAAA;AAAA,IACJ,IAAA,EAAM,MAAA;AAAA,IACN,EAAA,EAAI,QAAA;AAAA,IACJ,GAAA,EAAK,QAAA;AAAA,IACL,KAAA,EAAO,OAAA;AAAA,IACP,GAAA,EAAK,KAAA;AAAA,IACL,EAAA,EAAI,KAAA;AAAA,IACJ,GAAA,EAAK,KAAA;AAAA,IACL,CAAA,EAAG,GAAA;AAAA,IACH,CAAA,EAAG,GAAA;AAAA,IACH,GAAA,EAAK,KAAA;AAAA,IACL,EAAA,EAAI,QAAA;AAAA,IACJ,GAAA,EAAK,KAAA;AAAA,IACL,GAAA,EAAK,KAAA;AAAA,IACL,IAAA,EAAM,MAAA;AAAA,IACN,IAAA,EAAM,MAAA;AAAA,IACN,IAAA,EAAM,MAAA;AAAA,IACN,IAAA,EAAM,MAAA;AAAA,IACN,GAAA,EAAK,MAAA;AAAA,IACL,GAAA,EAAK,KAAA;AAAA,IACL,MAAA,EAAQ,QAAA;AAAA,IACR,IAAA,EAAM,MAAA;AAAA,IACN,IAAA,EAAM,MAAA;AAAA,IACN,GAAA,EAAK,MAAA;AAAA,IACL,IAAA,EAAM,MAAA;AAAA,IACN,GAAA,EAAK,KAAA;AAAA,IACL,EAAA,EAAI,UAAA;AAAA,IACJ,GAAA,EAAK,UAAA;AAAA,IACL,GAAA,EAAK,KAAA;AAAA,IACL,EAAA,EAAI,MAAA;AAAA,IACJ,IAAA,EAAM,MAAA;AAAA,IACN,GAAA,EAAK,MAAA;AAAA,IACL,IAAA,EAAM,MAAA;AAAA,IACN,GAAA,EAAK,YAAA;AAAA,IACL,UAAA,EAAY,YAAA;AAAA,IACZ,QAAA,EAAU,UAAA;AAAA,IACV,KAAA,EAAO,OAAA;AAAA,IACP,EAAA,EAAI,WAAA;AAAA,IACJ,GAAA,EAAK,KAAA;AAAA,IACL,OAAA,EAAS,SAAA;AAAA,IACT,GAAA,EAAK,SAAA;AAAA,IACL,KAAA,EAAO,UAAA;AAAA,IACP,CAAA,EAAG,GAAA;AAAA,IACH,KAAA,EAAO,OAAA;AAAA,IACP,GAAA,EAAK,SAAA;AAAA,IACL,EAAA,EAAI,QAAA;AAAA,IACJ,GAAA,EAAK,QAAA;AAAA,IACL,GAAA,EAAK,QAAA;AAAA,IACL,EAAA,EAAI,SAAA;AAAA,IACJ,GAAA,EAAK,KAAA;AAAA,IACL,EAAA,EAAI,MAAA;AAAA,IACJ,IAAA,EAAM,MAAA;AAAA,IACN,GAAA,EAAK,KAAA;AAAA,IACL,GAAA,EAAK,KAAA;AAAA,IACL,CAAA,EAAG,GAAA;AAAA,IACH,GAAA,EAAK;AAAA,GACP;AAEA,EAAA,OAAO,WAAA,CAAY,GAAA,IAAO,EAAE,CAAA,IAAK,WAAA;AACnC;AAKO,SAAS,QAAQ,KAAA,EAAuB;AAC7C,EAAA,OAAO,KAAA,CACJ,WAAA,EAAY,CACZ,OAAA,CAAQ,aAAA,EAAe,GAAG,CAAA,CAC1B,OAAA,CAAQ,QAAA,EAAU,EAAE,CAAA,CACpB,KAAA,CAAM,GAAG,EAAE,CAAA;AAChB;AAOO,IAAM,YAAA,GAAe;AAGrB,IAAM,aAAA,GAAgB","file":"index.cjs","sourcesContent":["import { z } from 'zod';\n\n// =============================================================================\n// ENUMS & PRIMITIVES\n// =============================================================================\n\nexport const BuildlogFormatSchema = z.enum([\"slim\", \"full\"]);\n\nexport const EditorTypeSchema = z.enum([\n  \"cursor\", \"vscode\", \"windsurf\", \"zed\", \"neovim\", \"jetbrains\", \"openclaw\", \"other\"\n]);\n\nexport const AIProviderSchema = z.enum([\n  \"claude\", \"gpt\", \"copilot\", \"gemini\", \"other\"\n]);\n\nexport const NoteCategorySchema = z.enum([\n  \"explanation\", \"tip\", \"warning\", \"decision\", \"todo\"\n]);\n\nexport const TerminalOutcomeSchema = z.enum([\n  \"success\", \"failure\", \"partial\"\n]);\n\nexport const OutcomeStatusSchema = z.enum([\n  \"success\", \"partial\", \"failure\", \"abandoned\"\n]);\n\n// =============================================================================\n// NESTED SCHEMAS\n// =============================================================================\n\nexport const BuildlogAuthorSchema = z.object({\n  name: z.string().optional(),\n  username: z.string().optional(),\n  url: z.string().url().optional(),\n});\n\n// =============================================================================\n// STEP SCHEMAS\n// =============================================================================\n\nconst BaseStepSchema = z.object({\n  id: z.string().uuid(),\n  timestamp: z.number().nonnegative(),\n  sequence: z.number().int().nonnegative(),\n});\n\nexport const PromptStepSchema = BaseStepSchema.extend({\n  type: z.literal(\"prompt\"),\n  content: z.string().min(1),\n  context: z.array(z.string()).optional(),\n  intent: z.string().optional(),\n});\n\nexport const ActionStepSchema = BaseStepSchema.extend({\n  type: z.literal(\"action\"),\n  summary: z.string().min(1),\n  filesCreated: z.array(z.string()).optional(),\n  filesModified: z.array(z.string()).optional(),\n  filesDeleted: z.array(z.string()).optional(),\n  packagesAdded: z.array(z.string()).optional(),\n  packagesRemoved: z.array(z.string()).optional(),\n  approach: z.string().optional(),\n  aiResponse: z.string().optional(),\n  diffs: z.record(z.string()).optional(),\n});\n\nexport const TerminalStepSchema = BaseStepSchema.extend({\n  type: z.literal(\"terminal\"),\n  command: z.string().min(1),\n  outcome: TerminalOutcomeSchema,\n  summary: z.string().optional(),\n  output: z.string().optional(),\n  exitCode: z.number().int().optional(),\n});\n\nexport const NoteStepSchema = BaseStepSchema.extend({\n  type: z.literal(\"note\"),\n  content: z.string().min(1),\n  category: NoteCategorySchema.optional(),\n});\n\nexport const CheckpointStepSchema = BaseStepSchema.extend({\n  type: z.literal(\"checkpoint\"),\n  name: z.string().min(1),\n  summary: z.string().min(1),\n});\n\nexport const ErrorStepSchema = BaseStepSchema.extend({\n  type: z.literal(\"error\"),\n  message: z.string().min(1),\n  resolution: z.string().optional(),\n  resolved: z.boolean(),\n});\n\nexport const BuildlogStepSchema = z.discriminatedUnion(\"type\", [\n  PromptStepSchema,\n  ActionStepSchema,\n  TerminalStepSchema,\n  NoteStepSchema,\n  CheckpointStepSchema,\n  ErrorStepSchema,\n]);\n\n// =============================================================================\n// METADATA SCHEMA\n// =============================================================================\n\nexport const BuildlogMetadataSchema = z.object({\n  id: z.string().uuid(),\n  title: z.string().min(1).max(200),\n  description: z.string().max(2000).optional(),\n  author: BuildlogAuthorSchema.optional(),\n  createdAt: z.string().datetime(),\n  durationSeconds: z.number().int().nonnegative(),\n  editor: EditorTypeSchema,\n  aiProvider: AIProviderSchema,\n  model: z.string().optional(),\n  language: z.string().optional(),\n  framework: z.string().optional(),\n  tags: z.array(z.string().max(50)).max(20).optional(),\n  replicable: z.boolean(),\n  dependencies: z.array(z.string()).optional(),\n});\n\n// =============================================================================\n// OUTCOME SCHEMA\n// =============================================================================\n\nexport const BuildlogOutcomeSchema = z.object({\n  status: OutcomeStatusSchema,\n  summary: z.string().min(1),\n  filesCreated: z.number().int().nonnegative(),\n  filesModified: z.number().int().nonnegative(),\n  canReplicate: z.boolean(),\n  replicationNotes: z.string().optional(),\n});\n\n// =============================================================================\n// ROOT FILE SCHEMA\n// =============================================================================\n\nexport const BuildlogFileSchema = z.object({\n  version: z.literal(\"2.0.0\"),\n  format: BuildlogFormatSchema,\n  metadata: BuildlogMetadataSchema,\n  steps: z.array(BuildlogStepSchema),\n  outcome: BuildlogOutcomeSchema,\n});\n\n// Type inference from schemas\nexport type BuildlogFileFromSchema = z.infer<typeof BuildlogFileSchema>;\nexport type BuildlogStepFromSchema = z.infer<typeof BuildlogStepSchema>;\n\n// =============================================================================\n// LEGACY SCHEMAS (Deprecated - for v1 compatibility reference only)\n// =============================================================================\n\n/** @deprecated Use BuildlogStepSchema instead */\nexport const BuildlogEventSchema = BuildlogStepSchema;\n","/** Current buildlog schema version */\nexport const BUILDLOG_VERSION = '2.0.0';\n\n/** Default capture format */\nexport const BUILDLOG_DEFAULT_FORMAT = 'slim';\n\n/** MIME type for buildlog files */\nexport const BUILDLOG_MIME_TYPE = 'application/vnd.buildlog+json';\n\n/** Valid file extensions for buildlog files */\nexport const BUILDLOG_EXTENSIONS = ['.buildlog', '.vibe'];\n\n/** Default file extension */\nexport const BUILDLOG_DEFAULT_EXTENSION = '.buildlog';\n\n/** Maximum recommended file size for slim buildlogs (100KB warning threshold) */\nexport const BUILDLOG_MAX_SLIM_SIZE_BYTES = 100 * 1024;\n\n/** Maximum recommended file size for full buildlogs (50MB) */\nexport const BUILDLOG_MAX_FULL_SIZE_BYTES = 50 * 1024 * 1024;\n\n/** Maximum recommended steps per buildlog */\nexport const BUILDLOG_MAX_STEPS = 500;\n\n/** Maximum title length */\nexport const BUILDLOG_MAX_TITLE_LENGTH = 200;\n\n/** Maximum description length */\nexport const BUILDLOG_MAX_DESCRIPTION_LENGTH = 2000;\n\n/** Maximum tags */\nexport const BUILDLOG_MAX_TAGS = 20;\n\n/** Maximum tag length */\nexport const BUILDLOG_MAX_TAG_LENGTH = 50;\n\n/** Files/patterns that should always be ignored during capture */\nexport const BUILDLOG_IGNORE_PATTERNS = [\n  '**/node_modules/**',\n  '**/.git/**',\n  '**/dist/**',\n  '**/build/**',\n  '**/.next/**',\n  '**/.nuxt/**',\n  '**/coverage/**',\n  '**/*.lock',\n  '**/package-lock.json',\n  '**/pnpm-lock.yaml',\n  '**/yarn.lock',\n  '**/*.log',\n  '**/.env*',\n  '**/*.map',\n  '**/.DS_Store',\n  '**/Thumbs.db',\n];\n","import type { \n  BuildlogFile, \n  BuildlogStep, \n  BuildlogStats,\n  BuildlogSizeCategory,\n  ValidationResult,\n  ValidationWarning\n} from './types';\nimport { BuildlogFileSchema } from './schema';\nimport { \n  BUILDLOG_EXTENSIONS, \n  BUILDLOG_MIME_TYPE,\n  BUILDLOG_MAX_SLIM_SIZE_BYTES,\n  BUILDLOG_MAX_FULL_SIZE_BYTES\n} from './constants';\n\n/**\n * Check if a filename has a valid buildlog extension\n */\nexport function isBuildlogFile(filename: string): boolean {\n  const lower = filename.toLowerCase();\n  return BUILDLOG_EXTENSIONS.some(ext => lower.endsWith(ext));\n}\n\n/**\n * Get the file extension for buildlog files\n */\nexport function getBuildlogExtension(): string {\n  return '.buildlog';\n}\n\n/**\n * Get the MIME type for buildlog files\n */\nexport function getBuildlogMimeType(): string {\n  return BUILDLOG_MIME_TYPE;\n}\n\n/**\n * Validate a buildlog file\n */\nexport function validateBuildlog(data: unknown): ValidationResult {\n  const result = BuildlogFileSchema.safeParse(data);\n  \n  if (result.success) {\n    const buildlog = result.data as BuildlogFile;\n    const warnings: ValidationWarning[] = [];\n    \n    // Check if slim buildlog is too large\n    const jsonSize = JSON.stringify(data).length;\n    if (buildlog.format === 'slim' && jsonSize > BUILDLOG_MAX_SLIM_SIZE_BYTES) {\n      warnings.push({\n        path: 'format',\n        message: `Slim buildlog is ${formatBytes(jsonSize)}, which exceeds the recommended ${formatBytes(BUILDLOG_MAX_SLIM_SIZE_BYTES)} limit`,\n        suggestion: 'Consider removing full diffs or AI responses, or switch to full format'\n      });\n    }\n    \n    // Check if full buildlog is too large\n    if (buildlog.format === 'full' && jsonSize > BUILDLOG_MAX_FULL_SIZE_BYTES) {\n      warnings.push({\n        path: 'format',\n        message: `Full buildlog is ${formatBytes(jsonSize)}, which exceeds the recommended ${formatBytes(BUILDLOG_MAX_FULL_SIZE_BYTES)} limit`,\n        suggestion: 'Consider splitting into multiple buildlogs'\n      });\n    }\n    \n    return { valid: true, warnings: warnings.length > 0 ? warnings : undefined };\n  }\n  \n  return {\n    valid: false,\n    errors: result.error.issues.map(issue => ({\n      path: issue.path.join('.'),\n      message: issue.message,\n      code: issue.code,\n    })),\n  };\n}\n\n/**\n * Parse and validate a buildlog JSON string\n */\nexport function parseBuildlog(json: string): BuildlogFile {\n  const data = JSON.parse(json);\n  const result = BuildlogFileSchema.parse(data);\n  return result as BuildlogFile;\n}\n\n/**\n * Safely parse a buildlog, returning null on failure\n */\nexport function safeParseBuildlog(json: string): BuildlogFile | null {\n  try {\n    return parseBuildlog(json);\n  } catch {\n    return null;\n  }\n}\n\n/**\n * Compute statistics from a buildlog\n */\nexport function computeStats(buildlog: BuildlogFile): BuildlogStats {\n  const stats: BuildlogStats = {\n    format: buildlog.format,\n    durationSeconds: buildlog.metadata.durationSeconds,\n    stepCount: buildlog.steps.length,\n    promptCount: 0,\n    actionCount: 0,\n    terminalCount: 0,\n    noteCount: 0,\n    filesCreated: buildlog.outcome.filesCreated,\n    filesModified: buildlog.outcome.filesModified,\n    isReplicable: buildlog.outcome.canReplicate,\n  };\n\n  for (const step of buildlog.steps) {\n    switch (step.type) {\n      case 'prompt':\n        stats.promptCount++;\n        break;\n      case 'action':\n        stats.actionCount++;\n        break;\n      case 'terminal':\n        stats.terminalCount++;\n        break;\n      case 'note':\n        stats.noteCount++;\n        break;\n    }\n  }\n  \n  return stats;\n}\n\n/**\n * Estimate size category for a buildlog\n */\nexport function estimateBuildlogSize(buildlog: BuildlogFile): BuildlogSizeCategory {\n  const jsonSize = JSON.stringify(buildlog).length;\n  \n  if (jsonSize < 10 * 1024) return 'tiny';      // < 10KB\n  if (jsonSize < 50 * 1024) return 'small';     // < 50KB\n  if (jsonSize < 500 * 1024) return 'medium';   // < 500KB\n  return 'large';                                // >= 500KB\n}\n\n/**\n * Check if a buildlog is replicable (can be followed by another agent)\n */\nexport function isReplicable(buildlog: BuildlogFile): boolean {\n  // Must have at least one prompt\n  const hasPrompts = buildlog.steps.some(s => s.type === 'prompt');\n  if (!hasPrompts) return false;\n  \n  // Must have an outcome\n  if (!buildlog.outcome) return false;\n  \n  // Check the explicit replicable flag\n  return buildlog.outcome.canReplicate && buildlog.metadata.replicable;\n}\n\n/**\n * Convert a buildlog to slim format (strips full mode data)\n */\nexport function toSlim(buildlog: BuildlogFile): BuildlogFile {\n  if (buildlog.format === 'slim') {\n    return buildlog;\n  }\n  \n  return {\n    ...buildlog,\n    format: 'slim',\n    steps: buildlog.steps.map(step => {\n      if (step.type === 'action') {\n        // Remove full mode fields\n        const { aiResponse, diffs, ...slimAction } = step;\n        return slimAction;\n      }\n      if (step.type === 'terminal') {\n        // Remove full mode fields\n        const { output, exitCode, ...slimTerminal } = step;\n        return slimTerminal;\n      }\n      return step;\n    }),\n  };\n}\n\n/**\n * Format duration in seconds to human readable string\n */\nexport function formatDuration(seconds: number): string {\n  const hours = Math.floor(seconds / 3600);\n  const minutes = Math.floor((seconds % 3600) / 60);\n  const secs = Math.floor(seconds % 60);\n\n  if (hours > 0) {\n    return `${hours}h ${minutes}m`;\n  }\n  if (minutes > 0) {\n    return `${minutes}m ${secs}s`;\n  }\n  return `${secs}s`;\n}\n\n/**\n * Format duration as MM:SS or HH:MM:SS\n */\nexport function formatDurationClock(seconds: number): string {\n  const hours = Math.floor(seconds / 3600);\n  const minutes = Math.floor((seconds % 3600) / 60);\n  const secs = Math.floor(seconds % 60);\n\n  if (hours > 0) {\n    return `${hours}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n  }\n  return `${minutes}:${secs.toString().padStart(2, '0')}`;\n}\n\n/**\n * Format bytes to human readable string\n */\nexport function formatBytes(bytes: number): string {\n  if (bytes < 1024) return `${bytes} B`;\n  if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;\n  return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;\n}\n\n/**\n * Get step icon for display\n */\nexport function getStepIcon(step: BuildlogStep): string {\n  const icons: Record<BuildlogStep['type'], string> = {\n    prompt: 'üí¨',\n    action: '‚ö°',\n    terminal: 'üñ•Ô∏è',\n    note: 'üìù',\n    checkpoint: 'üö©',\n    error: '‚ùå',\n  };\n  return icons[step.type];\n}\n\n/**\n * Get human readable step type label\n */\nexport function getStepLabel(step: BuildlogStep): string {\n  const labels: Record<BuildlogStep['type'], string> = {\n    prompt: 'Prompt',\n    action: 'Action',\n    terminal: 'Terminal',\n    note: 'Note',\n    checkpoint: 'Checkpoint',\n    error: 'Error',\n  };\n  return labels[step.type];\n}\n\n/**\n * Detect programming language from file path\n */\nexport function detectLanguage(filePath: string): string {\n  const ext = filePath.split('.').pop()?.toLowerCase();\n  \n  const languageMap: Record<string, string> = {\n    ts: 'typescript',\n    tsx: 'typescript',\n    js: 'javascript',\n    jsx: 'javascript',\n    mjs: 'javascript',\n    cjs: 'javascript',\n    py: 'python',\n    rb: 'ruby',\n    go: 'go',\n    rs: 'rust',\n    java: 'java',\n    kt: 'kotlin',\n    kts: 'kotlin',\n    swift: 'swift',\n    cpp: 'cpp',\n    cc: 'cpp',\n    cxx: 'cpp',\n    c: 'c',\n    h: 'c',\n    hpp: 'cpp',\n    cs: 'csharp',\n    php: 'php',\n    css: 'css',\n    scss: 'scss',\n    sass: 'sass',\n    less: 'less',\n    html: 'html',\n    htm: 'html',\n    vue: 'vue',\n    svelte: 'svelte',\n    json: 'json',\n    yaml: 'yaml',\n    yml: 'yaml',\n    toml: 'toml',\n    xml: 'xml',\n    md: 'markdown',\n    mdx: 'markdown',\n    sql: 'sql',\n    sh: 'bash',\n    bash: 'bash',\n    zsh: 'bash',\n    fish: 'fish',\n    ps1: 'powershell',\n    dockerfile: 'dockerfile',\n    makefile: 'makefile',\n    cmake: 'cmake',\n    tf: 'terraform',\n    hcl: 'hcl',\n    graphql: 'graphql',\n    gql: 'graphql',\n    proto: 'protobuf',\n    r: 'r',\n    scala: 'scala',\n    clj: 'clojure',\n    ex: 'elixir',\n    exs: 'elixir',\n    erl: 'erlang',\n    hs: 'haskell',\n    lua: 'lua',\n    pl: 'perl',\n    dart: 'dart',\n    nim: 'nim',\n    zig: 'zig',\n    v: 'v',\n    sol: 'solidity',\n  };\n\n  return languageMap[ext || ''] || 'plaintext';\n}\n\n/**\n * Generate a slug from a title\n */\nexport function slugify(title: string): string {\n  return title\n    .toLowerCase()\n    .replace(/[^a-z0-9]+/g, '-')\n    .replace(/^-|-$/g, '')\n    .slice(0, 50);\n}\n\n// =============================================================================\n// LEGACY EXPORTS (Deprecated - for v1 compatibility)\n// =============================================================================\n\n/** @deprecated Use getStepIcon instead */\nexport const getEventIcon = getStepIcon;\n\n/** @deprecated Use getStepLabel instead */\nexport const getEventLabel = getStepLabel;\n"]}